import{d as E,h as d,c as N,a as l,o as r,b as x,e as t,w as y,u as w,m as A,i as c,v as F,j as T,f as h,P as U,g as k,k as _,l as L,p as C,F as m,r as V,t as P,W}from"./app-MbqYixi5.js";const z={class:"min-h-screen bg-gradient-to-b from-blue-50 to-white p-6 text-[#1b1b18]"},D={key:0,class:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto mt-20"},H={class:"space-y-4"},K={key:1,class:"container mx-auto px-4 py-8"},q={class:"text-center mb-12"},I={class:"max-w-3xl mx-auto"},O={class:"bg-white rounded-xl shadow-lg p-8"},R={key:0,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},Y={key:1,class:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},G={class:"space-y-2"},J=["disabled"],Q=["value"],X={class:"space-y-2"},Z=["disabled"],$=["value"],ee=["disabled"],te={key:0,class:"flex items-center justify-center"},se={key:1},oe="CLACBarja25",re=E({__name:"Welcome",props:{teams:{},candidates:{}},setup(S){const v=S;console.log("props.candidates",v.candidates);const o=d({team_id:"",candidate_id:""}),a=d(!1),n=d(!1),p=d(!1),u=d(""),b=d(!1),f=()=>{u.value===oe?b.value=!0:alert("Incorrect password")},B=N(()=>o.value.team_id?v.candidates.filter(i=>i.team_id==Number(o.value.team_id)):[]),M=async()=>{var i,e;if(a.value=!0,n.value=!1,p.value=!1,!o.value.team_id){alert("Please select a team"),a.value=!1;return}try{await W.post(route("home"),o.value),n.value=!0,o.value={team_id:"",candidate_id:""}}catch(s){if((e=(i=s.response)==null?void 0:i.data)!=null&&e.errors){const g=s.response.data.errors;Object.keys(g).forEach(j=>{alert(g[j][0])})}else console.error("Error submitting vote:",s),alert("An error occurred while submitting your vote. Please try again.")}finally{a.value=!1}};return(i,e)=>(r(),l(m,null,[x(w(A),{title:"Election Voting"},{default:y(()=>e[3]||(e[3]=[t("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),t("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])),_:1}),t("div",z,[b.value?(r(),l("div",K,[t("div",q,[e[7]||(e[7]=t("h1",{class:"text-4xl font-bold text-gray-900 mb-2"},"Election Voting System",-1)),e[8]||(e[8]=t("p",{class:"text-gray-600"},"Cast your vote for your preferred candidate",-1)),x(w(U),{href:i.route("result"),class:"inline-flex items-center px-6 py-3 text-lg font-semibold text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"},{default:y(()=>e[6]||(e[6]=[h(" View Voting Results "),t("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),_:1},8,["href"])]),t("div",I,[t("div",O,[n.value?(r(),l("div",R,e[9]||(e[9]=[_('<div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><div class="ml-3"><p class="text-sm font-medium text-green-800">The vote has been successfully recorded!</p></div></div>',1)]))):k("",!0),p.value?(r(),l("div",Y,e[10]||(e[10]=[_('<div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M12 3v1m0 16H9m3 0h3m-3 0l-4-4m4 4l4-4"></path></svg></div><div class="ml-3"><p class="text-sm font-medium text-red-800">An error occurred while submitting your vote. Please try again.</p></div></div>',1)]))):k("",!0),t("form",{onSubmit:L(M,["prevent"]),class:"space-y-6"},[t("div",G,[e[12]||(e[12]=t("label",{for:"team",class:"block text-lg font-medium text-gray-900"},"Select Team",-1)),c(t("select",{id:"team","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.team_id=s),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-lg py-3 text-gray-900",required:"",disabled:a.value},[e[11]||(e[11]=t("option",{value:"",class:"text-gray-900"},"Choose a team...",-1)),(r(!0),l(m,null,V(i.teams,s=>(r(),l("option",{key:s.id,value:s.id,class:"text-gray-900"},P(s.name),9,Q))),128))],8,J),[[C,o.value.team_id]])]),t("div",X,[e[14]||(e[14]=t("label",{for:"candidate",class:"block text-lg font-medium text-gray-900"},"Select Candidate",-1)),c(t("select",{id:"candidate","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.candidate_id=s),class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-lg py-3 text-gray-900",disabled:a.value||!o.value.team_id},[e[13]||(e[13]=t("option",{value:"",class:"text-gray-900"},"Choose a candidate...",-1)),(r(!0),l(m,null,V(B.value,s=>(r(),l("option",{key:s.id,value:s.id},P(s.name),9,$))),128))],8,Z),[[C,o.value.candidate_id]])]),t("button",{type:"submit",class:"w-full bg-blue-600 text-white rounded-lg py-3 px-6 text-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:a.value||!o.value.team_id},[a.value?(r(),l("span",te,e[15]||(e[15]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),h(" Processing... ")]))):(r(),l("span",se,"Cast Your Vote"))],8,ee)],32)])])])):(r(),l("div",D,[e[5]||(e[5]=t("h2",{class:"text-2xl font-semibold text-gray-900 mb-6 text-center"},"Protected Content",-1)),t("div",H,[t("div",null,[e[4]||(e[4]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),c(t("input",{type:"password",id:"password","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),onKeyup:T(f,["enter"]),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password"},null,544),[[F,u.value]])]),t("button",{onClick:f,class:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"}," Unlock Form ")])]))])],64))}});export{re as default};
